
import {globalCounter, projects} from './initialize.js';

var pageID = 0;

//Recieves Todo as parameter, display it in the content div
const renderTodo = (obj) => {
  let title = document.createElement('p');
  title.innerText = obj.title;
  let description = document.createElement('p');
  description.innerText = obj.description;
  let dueDate = document.createElement('p');
  dueDate.innerText = obj.dueDate;
  let priority = document.createElement('p');
  priority.innerText = obj.priority;
  let container = document.createElement('div');
  container.setAttribute('class', 'Todo-container');
  container.appendChild(title);
  container.appendChild(description);
  container.appendChild(dueDate);
  container.appendChild(priority);
  appendDeleteAndCompleteTodoButton(container);
  document.getElementById('content').appendChild(container);
}

const logTodo = (obj) => {
  
  
  console.log(obj.title);
  
  console.log(obj.description);
  
  console.log(obj.dueDate);
  
  console.log(obj.priority);
}


//Display form when add Todo button is clicked
const activateTodoForm = () => {
  document.getElementById('TodoForm').classList.remove('inactive');
}

//Remove form from DOM when Todo is submitted
const deactivateTodoForm = () => {
  document.getElementById('TodoForm').classList.add('inactive');
}

//Display add Todo and erase content buttons after form is submitted
const activateTopbarButtons = () => {
  document.getElementById('eraseBTN').classList.remove('inactive');
  document.getElementById('addToDoBTN').classList.remove('inactive');;
}

//Remove add Todo and erase content buttons from DOM when add Todo is clicked
const deactivateTopbarButtons = () => {
  document.getElementById('eraseBTN').classList.add('inactive');
  document.getElementById('addToDoBTN').classList.add('inactive');
}

//Add delete button to a Todo passed into this function
function appendDeleteAndCompleteTodoButton(input) {
  let deleteTodoBTN = document.createElement('button');
  deleteTodoBTN.innerText = "Delete Todo";
  deleteTodoBTN.classList.add('deleteTodoBTN')
  input.appendChild(deleteTodoBTN);
  deleteTodoBTN.addEventListener('click', deleteTodo, false);
  deleteTodoBTN.myParam = deleteTodoBTN.parentElement;

  let completeBTN = document.createElement('button');
  completeBTN.innerText = "Complete Todo";
  completeBTN.classList.add('completeBTN')
  input.appendChild(completeBTN);
  completeBTN.addEventListener('click', completeTodo, false);
  completeBTN.myParam2 = completeBTN.parentElement;
}

//Deletes Todo passed into this function
function deleteTodo(evt) {
  evt.currentTarget.myParam.remove();
}

function completeTodo(evt) {
  if(!evt.currentTarget.myParam2.hasAttribute('id')){
    evt.currentTarget.myParam2.setAttribute('id', 'complete');
  }
}

const activateCreateProjectBTN = () => {
  document.getElementById('addProjectBTN').classList.remove('inactive')
}
const deactivateCreateProjectBTN = () => {
  document.getElementById('addProjectBTN').classList.add('inactive')
}


const activateProjectForm = () => {
  document.getElementById('projectForm').classList.remove('inactive')
}
const deactivateProjectForm = () => {
  document.getElementById('projectForm').classList.add('inactive')
}


const renderProjectTitleBTN = () => {
  const projectButton = document.createElement('button');
  projectButton.innerText = projectName.value;
  projectButton.setAttribute('id', globalCounter);
  document.getElementById('side-bar').appendChild(projectButton);
  document.getElementById('projectForm').reset();
  projectButton.addEventListener('click', function(){
    pageID = projectButton.getAttribute('id')
    // console.log(pageID);
    for (const i in projects) {
      // console.log(projects[i].id);
      if (projects[i].id == pageID) {
        // console.log(projects[i]);
        //render project function here -> render(projects[i].todoArr)
        renderProject(projects[i].todoArr)
      }
    }
  })
}

const renderProject = (project) => {
  document.getElementById('content').innerHTML = "";
  for (const i in project) {
    renderTodo(project[i]);
  }
}

export {
  renderTodo,
  activateTodoForm,
  deactivateTodoForm,
  deactivateTopbarButtons,
  activateTopbarButtons,
  renderProjectTitleBTN,
  activateProjectForm,
  deactivateProjectForm,
  activateCreateProjectBTN,
  deactivateCreateProjectBTN,
  pageID
};